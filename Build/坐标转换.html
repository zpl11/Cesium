<!--
 * @Author: 赵鹏龙
 * @Date: 2022-02-14 11:07:06
 * @LastEditors: 赵鹏龙
 * @LastEditTime: 2022-02-15 14:41:41
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="./Cesium/Widgets/widgets.css">
<script src="./Cesium/Cesium.js"></script>

<body>
    <div id="cesiumContainer" class="fullSize"></div>
    <div id="loadingOverlay"><h1>Loading...</h1></div>
    <div id="toolbar"></div>
</body>

<script>
    // Viewer 类
    // Camera 摄像头
    // ImageryLayer 不同的地图类型
    // TerrainProvider 三维
    // Entity 地图交互
    // Cesium3DTileset 更加细腻的渲染场景
    // Primitive 提升性能
    // Fabric
    // particleSystem

    // 将 id 
    const viewer = new Cesium.Viewer("cesiumContainer",{
        // 查找位置
        geocoder:false,
        // 返回初始视角
        homeButton:false,
        // 视角模式选择器
        sceneModePicker:false,
        // 图层选择器
        baseLayerPicker:false,
        // 导航帮助按钮
        navigationHelpButton:false,
        // 动画器件
        animation:false,
        // 时间线
        timeline:false,
        // 版权显示
        creditsDisplay:false,
        // 全屏按钮
        fullscreenButton:false
        
    });

    let handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas)
    handler.setInputAction(function(e){
        // 屏幕像素坐标
        console.log('鼠标单击事件'+e.position)
        // 世界坐标
        console.log('世界坐标'+viewer.scene.camera.pickEllipsoid(e.position,viewer.scene.globe.ellipsoid))
        // 屏幕坐标转为世界坐标
        changeScreenPositionToWordPosition(e.position)
        // 通过点击获取世界坐标，再将世界坐标转换成经纬度
        getMapPosition(e.position)
        
    },Cesium.ScreenSpaceEventType.LEFT_CLICK)

    // 屏幕坐标转换为世界坐标
    function changeScreenPositionToWordPosition(screenPosition){
      let cartesian = viewer.scene.globe.pick(viewer.camera.getPickRay(screenPosition),viewer.scene)
      console.log(`世界坐标是${cartesian}`)
    }
    // 得到地图经纬度坐标
    function getMapPosition(screenPosition){
      var cartesian=viewer.camera.pickEllipsoid(screenPosition,viewer.scene.globe.ellipsoid);
      var cartographic=Cesium.Cartographic.fromCartesian(cartesian);
      var lng=Cesium.Math.toDegrees(cartographic.longitude);//经度值
      var lat=Cesium.Math.toDegrees(cartographic.latitude);//纬度值
      var mapPosition={x:lng,y:lat,z:cartographic.height};//cartographic.height的值始终为零
      console.log(`地图坐标是`)
      console.log(mapPosition)
    }



    
</script>

<style>
    .cesium-viewer-toolbar,             /* 右上角按钮组 */
    .cesium-viewer-animationContainer,  /* 左下角动画控件 */
    .cesium-viewer-timelineContainer,   /* 时间线 */
    .cesium-viewer-bottom               /* logo信息 */ {
      display: none !important;
    }

    .cesium-widget-credits  /* 隐藏logo图片 */ {
      display: none !important;
    }

    .cesium-viewer-fullscreenContainer  /* 全屏按钮 */ {
      display: none !important;
      position: absolute;
      top: 0;
    }
</style>

</html>